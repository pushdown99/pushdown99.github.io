{
   "AWSTemplateFormatVersion":"2010-09-09",
   "Description":"Copyright 2018 Amazon.com, Inc. or its affiliates.",
   "Parameters":{
      "Subnet":{
         "Type":"AWS::EC2::Subnet::Id",
         "Description":"Service Catalog Linux Product",
         "ConstraintDescription":"Choose Subnet"
      },
      "KeyName":{
         "Type":"AWS::EC2::KeyPair::KeyName",
         "Default":"home",
         "Description":"Choose Qwiklab Keypair"
      },
      "SecurityGroup":{
         "Description":"Security Group used to limit the Source IP",
         "Type":"AWS::EC2::SecurityGroup::Id",
         "ConstraintDescription":"Choose Security Group"
      },
     "InstanceType":{
         "Type" : "String",
         "Default":"t2.small",
         "AllowedValues":["t2.micro", "t2.small", "m4.large"],
         "Description":"Choose Instance Type t2.micro, t2.small, m4.large"
      },
      "ApplicationName":{
         "Description":"",
         "Type":"String",
         "Default":"LinuxInstance"
      }
   },
   "Mappings":{
      "SingleNodeAMI":{
         "us-east-1":{
            "AMI":"ami-0b33d91d"
         },
         "us-east-2":{
            "AMI":"ami-c55673a0"
         },
         "us-west-1":{
            "AMI":"ami-165a0876"
         },
         "us-west-2":{
            "AMI":"ami-f173cc91"
         },
         "ca-central-1":{
            "AMI":"ami-ebed508f"
         },
         "ap-south-1":{
            "AMI":"ami-f9daac96"
         },
         "ap-northeast-2":{
            "AMI":"ami-dac312b4"
         },
         "ap-southeast-1":{
            "AMI":"ami-dc9339bf"
         },
         "ap-southeast-2":{
            "AMI":"ami-1c47407f"
         },
         "ap-northeast-1":{
            "AMI":"ami-56d4ad31"
         },
         "eu-central-1":{
            "AMI":"ami-af0fc0c0"
         },
         "eu-west-1":{
            "AMI":"ami-70edb016"
         },
         "eu-west-2":{
            "AMI":"ami-f1949e95"
         },
         "sa-east-1":{
            "AMI":"ami-80086dec"
         }
      }
   },
   "Outputs":{

   },
   "Resources":{
      "SingleNodeInstance":{
         "Type":"AWS::EC2::Instance",
         "Properties":{
            "SecurityGroupIds":[
               {
                  "Ref":"SecurityGroup"
               }
            ],
            "KeyName":{
               "Ref":"KeyName"
            },
            "ImageId":{
               "Fn::FindInMap":[
                  "SingleNodeAMI",
                  {
                     "Ref":"AWS::Region"
                  },
                  "AMI"
               ]
            },
            "Tags":[
               {
                  "Key":"Name",
                  "Value":{
                     "Ref":"ApplicationName"
                  }
               }
            ],
            "SubnetId":{
               "Ref":"Subnet"
            },
               "InstanceType":{
                "Ref":"InstanceType"
            }
          }
       }
    }
 }
